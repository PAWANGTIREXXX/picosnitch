# Maintainer : Eric Lesiuta <elesiuta@gmail.com>

pkgname=picosnitch
pkgver=0.7.0
pkgrel=1
epoch=1
pkgdesc='Protect your privacy, see which processes make remote network connections'
arch=('any')
url='https://elesiuta.github.io/picosnitch/'
license=('GPL3')
depends=('python' 'python-bcc' 'dbus-python' 'python-psutil' 'python-requests')
optdepends=()
makedepends=('python-setuptools')
checkdepends=()
provides=('picosnitch')
conflicts=('picosnitch')
BUILDENV=()
source=("picosnitch::https://github.com/elesiuta/picosnitch/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('2fa62aec9c911c57882bbe5fc709c44cbdc3210a6619a3d1cf520eb8c811380b')

build() {
    cd "picosnitch-${pkgver}"
    python setup.py build
}

package() {
    cd "picosnitch-${pkgver}"
    python setup.py install --prefix='/usr' --root="$pkgdir" --skip-build --optimize='1'
    install -D -m644 "${srcdir}/picosnitch-${pkgver}/debian/picosnitch.service" "${pkgdir}/usr/lib/systemd/system/picosnitch.service"
    systemctl daemon-reload
}
